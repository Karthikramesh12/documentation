"use strict";(self.webpackChunktrefle_docs=self.webpackChunktrefle_docs||[]).push([[476],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return h}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(t),u=r,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||i;return t?a.createElement(h,s(s({ref:n},c),{},{components:t})):a.createElement(h,s({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=u;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[d]="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},3882:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return d}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),s=["components"],o={slug:"1-6-0-released",title:"1.6.0",author:"Andr\xe9 Aubin",author_title:"Trefle Core Team",author_url:"https://twitter.com/lambda_2",author_image_url:"https://pbs.twimg.com/profile_images/1247213607353540608/i9oN_Gbg_400x400.jpg",tags:["releases"]},l=void 0,p={permalink:"/blog/1-6-0-released",editUrl:"https://github.com/treflehq/documentation/edit/master/blog/blog/2020-07-15-1-6-0.md",source:"@site/blog/2020-07-15-1-6-0.md",title:"1.6.0",description:"This major release of Trefle brings a lot of new exciting features, such as distributions, farming fields and blazing fast search.",date:"2020-07-15T00:00:00.000Z",formattedDate:"July 15, 2020",tags:[{label:"releases",permalink:"/blog/tags/releases"}],readingTime:4.265,hasTruncateMarker:!0,authors:[{name:"Andr\xe9 Aubin",title:"Trefle Core Team",url:"https://twitter.com/lambda_2",imageURL:"https://pbs.twimg.com/profile_images/1247213607353540608/i9oN_Gbg_400x400.jpg"}],frontMatter:{slug:"1-6-0-released",title:"1.6.0",author:"Andr\xe9 Aubin",author_title:"Trefle Core Team",author_url:"https://twitter.com/lambda_2",author_image_url:"https://pbs.twimg.com/profile_images/1247213607353540608/i9oN_Gbg_400x400.jpg",tags:["releases"]}},c={authorsImageUrls:[void 0]},d=[{value:"What changed ?",id:"what-changed-",level:2},{value:"\ud83d\udce6 Endpoints versioning",id:"-endpoints-versioning",level:3},{value:"\ud83d\udcc4 The data scructure changes",id:"-the-data-scructure-changes",level:3},{value:"\ud83d\udd27 Plant and species fields names changes",id:"-plant-and-species-fields-names-changes",level:3},{value:"\u2702\ufe0f The filters and sort parameter changes",id:"\ufe0f-the-filters-and-sort-parameter-changes",level:3},{value:"\ud83d\udcd0 Ranges and orders",id:"-ranges-and-orders",level:3},{value:"\ud83d\uddbc Better plants/species images",id:"-better-plantsspecies-images",level:3},{value:"\ud83c\udf0d Species distributions",id:"-species-distributions",level:3},{value:"\ud83d\udd0d Blazing fast search engine",id:"-blazing-fast-search-engine",level:3},{value:"\ud83e\uddf0 Error reporting and data collection",id:"-error-reporting-and-data-collection",level:3},{value:"\ud83d\udcd5 Adoption of better standards",id:"-adoption-of-better-standards",level:3},{value:"\ud83d\udce6 JSON responses when listing plants and species are more complete",id:"-json-responses-when-listing-plants-and-species-are-more-complete",level:3},{value:"\ud83d\udccb Synonyms separation",id:"-synonyms-separation",level:3},{value:"\ud83d\udcd0 Species fields scales changes",id:"-species-fields-scales-changes",level:3},{value:"\ud83d\udccb Common names split",id:"-common-names-split",level:3}],m={toc:d};function u(e){var n=e.components,t=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This major release of Trefle brings a lot of new exciting features, such as distributions, farming fields and blazing fast search."),(0,i.kt)("h2",{id:"what-changed-"},"What changed ?"),(0,i.kt)("h3",{id:"-endpoints-versioning"},"\ud83d\udce6 Endpoints versioning"),(0,i.kt)("p",null,"In order to avoid making breaking changes like this one in the future, API routes are now versionned. So the endpoint ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/species")," is now ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/species"),". This let you the possibility to update when you're ready for the next releases."),(0,i.kt)("h3",{id:"-the-data-scructure-changes"},"\ud83d\udcc4 The data scructure changes"),(0,i.kt)("p",null,"One of the biggest struggles we noticed was the pagination. Parsing the pagination links in the response headers was really painful, even if it's a stardard."),(0,i.kt)("p",null,"To solve this, ",(0,i.kt)("strong",{parentName:"p"},"we decided to include pagination links directly in the JSON response"),"."),(0,i.kt)("p",null,"Now, all API calls wraps a ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," field, along with a ",(0,i.kt)("inlineCode",{parentName:"p"},"links")," field, for pagination links, and optionally a ",(0,i.kt)("inlineCode",{parentName:"p"},"meta")," fields, for high level informations such as counts."),(0,i.kt)("h3",{id:"-plant-and-species-fields-names-changes"},"\ud83d\udd27 Plant and species fields names changes"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"We removed and added a lot of fields"),". Most of USDA fields, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"propagation")," or products uses were removed, as they were too inaccurates."),(0,i.kt)("p",null,"You can get:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/advanced/plants-fields"},"A simplified list of the current fields in the documentation"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/reference/#operation/getSpecies"},"The full list in the reference"),".")),(0,i.kt)("h3",{id:"\ufe0f-the-filters-and-sort-parameter-changes"},"\u2702\ufe0f The filters and sort parameter changes"),(0,i.kt)("p",null,"In order to avoid any name collision in parameters, ",(0,i.kt)("strong",{parentName:"p"},"filters are now scoped in the ",(0,i.kt)("inlineCode",{parentName:"strong"},"filter")," parameter"),". This means that ",(0,i.kt)("inlineCode",{parentName:"p"},"common_name=mint")," is now ",(0,i.kt)("inlineCode",{parentName:"p"},"filter[common_name]=mint"),"."),(0,i.kt)("p",null,"You now also can exclude null values from results with the ",(0,i.kt)("inlineCode",{parentName:"p"},"filter_not[ATTRIBUTE]")," parameter."),(0,i.kt)("p",null,"You can ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/filtering"},"read more about filters in the documentation")," or see the ",(0,i.kt)("a",{parentName:"p",href:"/reference/#operation/listSpecies"},"The full list of filters in the reference"),"."),(0,i.kt)("h3",{id:"-ranges-and-orders"},"\ud83d\udcd0 Ranges and orders"),(0,i.kt)("p",null,"You can now query the range of values between two values with the ",(0,i.kt)("inlineCode",{parentName:"p"},"range[FIELD]=min,max")," parameter."),(0,i.kt)("p",null,"For example, to query only species with a minimum height ",(0,i.kt)("strong",{parentName:"p"},"between")," 5 ",(0,i.kt)("strong",{parentName:"p"},"and")," 20 centimeters: ",(0,i.kt)("inlineCode",{parentName:"p"},"api/v1/species?token=YOUR_TREFLE_TOKEN&range[maximum_height_cm]=5,20"),"."),(0,i.kt)("p",null,"Filtering on ranges also allow to set only minimum or maximum values. For example:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/api/v1/species?range[maximum_height_cm]=5")," only return species higher than 5 cm"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/api/v1/species?range[maximum_height_cm]=,5")," only return species lower than 5 cm")),(0,i.kt)("p",null,"You can ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/filtering#filter-on-ranges"},"read more about ranges in the documentation")," or see the ",(0,i.kt)("a",{parentName:"p",href:"/reference/#operation/listSpecies"},"The full list of ranges in the reference"),"."),(0,i.kt)("h3",{id:"-better-plantsspecies-images"},"\ud83d\uddbc Better plants/species images"),(0,i.kt)("p",null,"Images were fully reviewed, and are now ",(0,i.kt)("strong",{parentName:"p"},"splitted into categories"),": flower, leaf, habit, fruit, bark and other."),(0,i.kt)("h3",{id:"-species-distributions"},"\ud83c\udf0d Species distributions"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"We began to collect plant locations (ex: France) and establishments (ex: Native) per zone"),", and they're now included in the ",(0,i.kt)("inlineCode",{parentName:"p"},"/species/{species_slug}")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"/plants/{species_slug}")," endpoints."),(0,i.kt)("p",null,"You can also filter species by distribution zones or by establishment."),(0,i.kt)("p",null,"For example, to get plants native from Tibet: ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/distributions/tibet/plants?filter[establishment]=native"),"."),(0,i.kt)("h3",{id:"-blazing-fast-search-engine"},"\ud83d\udd0d Blazing fast search engine"),(0,i.kt)("p",null,"A new search endpoint for plants and species is available: ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/species/search?q=term"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This search was designed to respond in milliseconds"),', and is ready for input autocomplete or "as you type" queries. ',(0,i.kt)("a",{parentName:"p",href:"https://trefle.io"},"You can see it in action on the landing page"),"."),(0,i.kt)("h3",{id:"-error-reporting-and-data-collection"},"\ud83e\uddf0 Error reporting and data collection"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"You can now ",(0,i.kt)("a",{parentName:"strong",href:"/docs/guides/reporting-errors"},"report errors on species"),", or even ",(0,i.kt)("a",{parentName:"strong",href:"/docs/advanced/complete-data"},"submit corrections / changes")," to us, directly from an API call.")),(0,i.kt)("p",null,"This means a lot to us, as we want our data to be everyone's, and believe strongly in the power of the community."),(0,i.kt)("h3",{id:"-adoption-of-better-standards"},"\ud83d\udcd5 Adoption of better standards"),(0,i.kt)("p",null,"All units are following the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Metric_system"},"International System of Units (SI)"),", so ",(0,i.kt)("strong",{parentName:"p"},"we replaced feets by centimeters, inches by millimeters and so on"),".\nTemperatures are in celcuis and kelvin degrees for now, as the conversion is more complex than for standard units."),(0,i.kt)("p",null,"Scientific names now follows the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Binomial_nomenclature"},"Binomial nomenclature"),". For the species, it represents its genus and its species within the genus, resulting in a single worldwide name for each organism. The scientific name of an infraspecific taxons (ranks below species, such as subspecies, forms, varieties...) is a combination of the name of a species and an infraspecific epithet. A connecting term is used to denote the rank. ",(0,i.kt)("a",{parentName:"p",href:"https://www.iapt-taxon.org/nomen/pages/main/art_24.html"},"See IAPT recommendation"),"."),(0,i.kt)("p",null,"Distribution zones for plants/species are following the ",(0,i.kt)("a",{parentName:"p",href:"https://www.tdwg.org/standards/wgsrpd/"},"World Geographical Scheme for Recording Plant Distributions (WGSRPD)"),"."),(0,i.kt)("h3",{id:"-json-responses-when-listing-plants-and-species-are-more-complete"},"\ud83d\udce6 JSON responses when listing plants and species are more complete"),(0,i.kt)("p",null,"We added some fields in the response, such as an image url or the genus and family names, and embedded synonyms."),(0,i.kt)("p",null,"For example, when listing plants:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'[\n  {\n    "id": 123486,\n    "slug": "corylus-avellana"\n    "scientific_name": "Corylus avellana",\n    "common_name": "common filbert",\n    "complete_data": false,\n    "link": "http://trefle.io/api/plants/123486",\n  }\n]\n')),(0,i.kt)("p",null,"Is now"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'{\n  "data": [\n    {\n      "id": 123486,\n      "slug": "corylus-avellana",\n      "scientific_name": "Corylus avellana",\n      "common_name": "common filbert",\n      "author": "L.",\n      "bibliography": "Sp. Pl.: 998 (1753)",\n      "family": "Betulaceae",\n      "family_common_name": "Birch family",\n      "genus": "Corylus",\n      "genus_id": 2057,\n      "image_url": "https://bs.floristic.org/image/o/0d92cadb0d66dce1b0a8b26913125d6501e31d68",\n      "rank": "species",\n      "status": "accepted",\n      "synonyms": [\n        "Corylus sylvestris"\n      ],\n      "year": 1753,\n      "links": {\n          "genus": "/api/v1/genus/corylus",\n          "plant": "/api/v1/plants/corylus-avellana",\n          "self": "/api/v1/species/corylus-avellana"\n      }\n    }\n  ],\n  "links": {\n    "first": "/api/v1/plants?filter%5Bscientific_name%5D=Corylus+avellana&page=1",\n    "last": "/api/v1/plants?filter%5Bscientific_name%5D=Corylus+avellana&page=1",\n    "self": "/api/v1/plants?filter%5Bscientific_name%5D=Corylus+avellana"\n  },\n  "meta": {\n    "total": 1\n  }\n}\n')),(0,i.kt)("h3",{id:"-synonyms-separation"},"\ud83d\udccb Synonyms separation"),(0,i.kt)("p",null,"Synonyms are no longer returned in the species or plants response, and are now included as an array in the response."),(0,i.kt)("h3",{id:"-species-fields-scales-changes"},"\ud83d\udcd0 Species fields scales changes"),(0,i.kt)("p",null,"\"Scale-like\" fields, such as \"light\" or \"soil adaptation\" are no longer with values like 'Low', 'Medium' and 'High', but are now on a scale from 0 to 10."),(0,i.kt)("h3",{id:"-common-names-split"},"\ud83d\udccb Common names split"),(0,i.kt)("p",null,"Common names have been reviewed, and are now grouped by language."))}u.isMDXComponent=!0}}]);