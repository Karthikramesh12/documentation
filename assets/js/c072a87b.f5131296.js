"use strict";(self.webpackChunktrefle_docs=self.webpackChunktrefle_docs||[]).push([[434],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),f=a,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||o;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(7294),a=n(6010),o="tabItem_Ymn6";function i(e){var t=e.children,n=e.hidden,i=e.className;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(o,i),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(7462),a=n(7294),o=n(6010),i=n(2389),l=n(7392),s=n(7094),u=n(2466),c="tabList__CuJ",p="tabItem_LNqP";function d(e){var t,n,i=e.lazy,d=e.block,f=e.defaultValue,m=e.values,h=e.groupId,b=e.className,v=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=m?m:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,l.l)(y,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===f?f:null!=(t=null!=f?f:null==(n=v.find((function(e){return e.props.default})))?void 0:n.props.value)?t:v[0].props.value;if(null!==k&&!y.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+y.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,s.U)(),T=w.tabGroupChoices,O=w.setTabGroupChoices,E=(0,a.useState)(k),I=E[0],N=E[1],P=[],j=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var x=T[h];null!=x&&x!==I&&y.some((function(e){return e.value===x}))&&N(x)}var C=function(e){var t=e.currentTarget,n=P.indexOf(t),r=y[n].value;r!==I&&(j(t),N(r),null!=h&&O(h,String(r)))},S=function(e){var t,n=null;switch(e.key){case"Enter":C(e);break;case"ArrowRight":var r,a=P.indexOf(e.currentTarget)+1;n=null!=(r=P[a])?r:P[0];break;case"ArrowLeft":var o,i=P.indexOf(e.currentTarget)-1;n=null!=(o=P[i])?o:P[P.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,o.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":d},b)},y.map((function(e){var t=e.value,n=e.label,i=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:I===t?0:-1,"aria-selected":I===t,key:t,ref:function(e){return P.push(e)},onKeyDown:S,onClick:C},i,{className:(0,o.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":I===t})}),null!=n?n:t)}))),i?(0,a.cloneElement)(v.filter((function(e){return e.props.value===I}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},v.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==I})}))))}function f(e){var t=(0,i.Z)();return a.createElement(d,(0,r.Z)({key:String(t)},e))}},4674:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return u},metadata:function(){return p},toc:function(){return f}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=n(5488),l=n(5162),s=["components"],u={id:"client-side-apps",title:"Client-side applications",image:"/img/client-scheme.png"},c=void 0,p={unversionedId:"advanced/client-side-apps",id:"advanced/client-side-apps",title:"Client-side applications",description:"The access token you get from your account page allow you to makes queries on the Trefle API, but your token needs to be kept secret, so you can't make queries from the browser as the user on your website will see the access token, and could use it for their personal needs. Additionally this is not a good practice in developing software.",source:"@site/docs/advanced/client-side-apps.md",sourceDirName:"advanced",slug:"/advanced/client-side-apps",permalink:"/docs/advanced/client-side-apps",draft:!1,editUrl:"https://github.com/treflehq/documentation/edit/master/docs/advanced/client-side-apps.md",tags:[],version:"current",lastUpdatedBy:"Andr\xe9 Aubin",lastUpdatedAt:1670748298,formattedLastUpdatedAt:"Dec 11, 2022",frontMatter:{id:"client-side-apps",title:"Client-side applications",image:"/img/client-scheme.png"},sidebar:"someSidebar",previous:{title:"Plants fields",permalink:"/docs/advanced/plants-fields"},next:{title:"Complete our data",permalink:"/docs/advanced/complete-data"}},d={},f=[],m={toc:f};function h(e){var t=e.components,u=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},m,u,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The access token you get from ",(0,o.kt)("a",{parentName:"p",href:"https://trefle.io/profile"},"your account page")," allow you to makes queries on the Trefle API, but your token needs to be kept secret, so ",(0,o.kt)("strong",{parentName:"p"},"you can't make queries from the browser as the user on your website will see the access token"),", and could use it for their personal needs. Additionally this is not a good practice in developing software."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"client workflow",src:n(6423).Z,width:"3500",height:"1988"})),(0,o.kt)("p",null,"If you need to perform client-side requests you will have to request a client-side token from your own backend and get a JWT token in return. This token will be usable on the client side. This call needs your secret access token and the url of the website that the client side requests will come from."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Because this is a ",(0,o.kt)("strong",{parentName:"p"},"POST")," request it can't be done directly from the browser.")),(0,o.kt)(i.Z,{groupId:"supports",defaultValue:"curl",values:[{label:"CURL",value:"curl"},{label:"NodeJS",value:"node"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"curl",mdxType:"TabItem"},(0,o.kt)("p",null,"In your terminal:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X POST 'https://trefle.io/api/auth/claim?token=YOUR_TREFLE_TOKEN&origin=YOUR-WEBSITE-URL&ip=12.34.56.78\"'\n"))),(0,o.kt)(l.Z,{value:"node",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const fetch = require('node-fetch');\n\n// The parameters for our POST request\nconst params = {\n  origin: 'YOUR-WEBSITE-URL',\n  ip: 'THE-WEBSITE-USER-IP',\n  token: 'YOUR_TREFLE_TOKEN'\n}\n\n(async () => {\n  const response = await fetch(\n    'https://trefle.io/api/auth/claim', {\n      method: 'post',\n      body: JSON.stringify(params),\n      headers: { 'Content-Type': 'application/json' }\n    });\n  const json = await response.json();\n  console.log(json);\n})();\n")))),(0,o.kt)("p",null,"And we get:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "token": "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxMDYsIm9yaWdpbiI6IllPVVItV0VCU0lURS1VUkwiLCJpcCI6IlRIRS1XRUJTSVRFLVVTRVItSVAiLCJleHAiOjE1OTQ2NDIxNDh9.Vd2d3UK7zdNWZLBOn8y50NcUKuF8xFZgh6p7EB4fhVw",\n  "expiration": "07-13-2020 14:09"\n}\n')),(0,o.kt)("p",null,"You can then use this token directly from the browser. It can't be used from another origin, will expire and only works for your website."),(0,o.kt)("admonition",{title:"About the user IP",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Putting the user remote IP in the claim API call is optional, but it provides an additional security layer. We don't keep or store this information.")))}h.isMDXComponent=!0},6423:function(e,t,n){t.Z=n.p+"assets/images/client-scheme-4f72896f68e37060a76439e967d84ab3.png"}}]);